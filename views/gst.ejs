<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>GST Summary</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <!-- Fonts / Icons -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" rel="stylesheet">
      <script src="/js/theme.js?v=<%= v %>"></script>
  <!-- Global + page-specific CSS (create /public/css/gst.css later if you like) -->
  <link rel="stylesheet" href="/css/global.css?v=<%= v %>">
  <link rel="icon" href="/favicon.ico?v=<%= v %>" type="image/x-icon">

  <!-- Minimal built-in style so the page still looks OK without extra CSS -->
  <style>
   /* =========================================================
   gst.css  –  full file (light ⬌ black-dark theme)
   ========================================================= */

/* ---------- Global tokens (LIGHT mode) ---------- */
:root{
  /* brand */
  --brand:#2563eb;
  --brand-light:#3b82f6;
  --brand-dark:#1e40af;

  /* text & surfaces */
  --page-bg:#f5f7fa;
  --sidebar-bg:#1f2937;
  --card-bg:#ffffff;
  --table-header:#f8fafc;

  --text-main:#374151;
  --text-sub:#94a3b8;
  --text-invert:#ffffff;

  --border:#e2e8f0;

  /* misc */
  --radius:.5rem;
  --font:'Inter',sans-serif;
  --transition:.3s ease;
  --shadow-sm:0 1px 2px rgba(0,0,0,.06);
  --shadow-md:0 4px 6px -1px rgba(0,0,0,.1),0 2px 4px -1px rgba(0,0,0,.06);
}

/* ---------- Reset & base ---------- */
*{margin:0;padding:0;box-sizing:border-box;}

body{
  display:flex;min-height:100vh;font-family:var(--font);
  background:var(--page-bg);color:var(--text-main);
  transition:background-color var(--transition),color var(--transition);
}

/* ---------- Sidebar ---------- */
.sidebar{
  width:220px;min-height:100vh;
  background:var(--sidebar-bg);color:var(--text-invert);
  padding:20px 15px;box-shadow:var(--shadow-md);
  display:flex;flex-direction:column;
}
.sidebar-logo{
  display:flex;align-items:center;margin-bottom:25px;
  font-size:1.15rem;font-weight:600;
}
.sidebar-logo i{margin-right:8px;}
.sidebar-links{display:flex;flex-direction:column;gap:2px;}
.sidebar-links a{
  display:flex;align-items:center;gap:10px;
  color:#cbd5e1;text-decoration:none;padding:8px 10px;
  border-radius:4px;font-size:.95rem;transition:background var(--transition),color var(--transition);
}
.sidebar-links a i{width:18px;text-align:center;}
.sidebar-links a:hover,
.sidebar-links a.active{
  background:#334155;color:#fff;
}

/* ---------- Main section ---------- */
main.page{
  flex:1;padding:25px;overflow:auto;
}
.page-title{
  margin-top:0;font-size:1.4rem;font-weight:600;margin-bottom:1rem;
}
.page-title small{font-size:.9rem;font-weight:400;color:var(--text-sub);}

/* ---------- Filter bar ---------- */
.filter-bar{
  display:flex;flex-wrap:wrap;gap:12px;margin-bottom:20px;
  align-items:flex-end;
}
.filter-bar label{
  font-size:.9rem;color:var(--text-main);display:flex;flex-direction:column;gap:4px;
}
.filter-bar input{
  padding:6px 8px;border:1px solid var(--border);border-radius:4px;
  font-size:.95rem;transition:border var(--transition),background var(--transition);
}
.filter-bar input:focus{
  outline:none;border-color:var(--brand);
  box-shadow:0 0 0 3px rgba(37,99,235,.15);
}
.btn{
  cursor:pointer;border:none;padding:8px 16px;border-radius:4px;
  font-weight:500;font-size:.95rem;display:flex;align-items:center;gap:6px;
  transition:background var(--transition),transform var(--transition),box-shadow var(--transition);
}
.btn-primary{background:var(--brand);color:#fff;}
.btn-primary:hover{
  background:var(--brand-dark);transform:translateY(-2px);
  box-shadow:0 4px 10px rgba(37,99,235,.25);
}

/* ---------- Table ---------- */
.table{
  width:100%;border-collapse:collapse;font-size:.92rem;
  box-shadow:var(--shadow-sm);border-radius:var(--radius);overflow:hidden;
}
.table th,
.table td{
  border:1px solid var(--border);
  padding:10px 8px;text-align:left;
}
.table th{background:var(--table-header);font-weight:600;}
.table th.num,
.table td.num{text-align:right;}
.table tbody tr:hover{background:rgba(0,0,0,.04);}
tfoot th{background:var(--table-header);}

/* ---------- Note ---------- */
.note{font-size:.8rem;color:var(--text-sub);margin-top:12px;}

/* ---------- Animation ---------- */
@keyframes fadeIn{
  from{opacity:0;transform:translateY(20px);}
  to  {opacity:1;transform:translateY(0);}
}
main.page{animation:fadeIn .4s ease-out;}

/* =========================================================
   DARK-MODE – true-black palette
   (applies when <html> or <body> has .dark-mode)
   ========================================================= */
html.dark-mode,
body.dark-mode{
  /* surfaces */
  --page-bg:#000000;
  --sidebar-bg:#000000;
  --card-bg:#0d0d0d;
  --table-header:#111111;

  /* text */
  --text-main:#fafafa;
  --text-sub:#9ca3b8;

  /* borders */
  --border:#222222;

  /* brand tint for focus ring */
  --brand-light:rgba(59,130,246,.30);
}

/* dark-specific tweaks */
body.dark-mode .sidebar-links a{color:var(--text-sub);}
body.dark-mode .sidebar-links a:hover,
body.dark-mode .sidebar-links a.active{
  background:#111827;color:var(--text-invert);
}
body.dark-mode .filter-bar input{
  background:#111111;color:var(--text-main);border-color:var(--border);
}
body.dark-mode .filter-bar input::placeholder{color:var(--text-sub);}
body.dark-mode .table tbody tr:hover{background:#111111;}
body.dark-mode input[type="month"]::-webkit-calendar-picker-indicator{
  filter:invert(1) brightness(1.8);
}

  </style>
</head>

<body>
  <!-- ───── Sidebar ───── -->
  <div class="sidebar" id="sidebar">
    <div class="sidebar-logo">
      <i class="fas fa-chart-line"></i>
      <span><%= user?.businessName || 'Dashboard' %></span>
    </div>

    <div class="sidebar-links">
      <a href="/dashboard"><i class="fas fa-home"></i><span>Dashboard</span></a>
      <a href="/sales"><i class="fas fa-rupee-sign"></i><span>Sales</span></a>
      <a href="/expense"><i class="fas fa-wallet"></i><span>Expenses</span></a>
      <a href="/profit"><i class="fas fa-chart-pie"></i><span>Profit</span></a>
      <a href="/gst" class="active"><i class="fas fa-receipt"></i><span>GST</span></a>
    </div>
  </div>

  <!-- ───── Main content ───── -->
  <main class="page">
    <h1 class="page-title">
      GST Summary <small style="font-weight:400;font-size:.9rem;">(<%= periodLabel %>)</small>
    </h1>

    <!-- filter panel -->
    <form class="filter-bar" method="get">
      <label>Month:
        <input type="month" name="month" value="<%= month %>">
      </label>
      <label>From:
        <input type="month" name="from" value="<%= from %>">
      </label>
      <label>To:
        <input type="month" name="to" value="<%= to %>">
      </label>
      <label>Year:
        <input type="number" name="year" min="2000" max="2100" value="<%= year %>">
      </label>
      <button class="btn btn-primary">Apply</button>
    </form>

    <table class="table">
      <thead>
        <tr>
          <th>Month</th>
          <th class="num">Taxable Turnover ₹</th>
          <th class="num">Output GST ₹</th>
          <th class="num">Input GST ₹</th>
          <th class="num">Net Payable ₹</th>
        </tr>
      </thead>
      <tbody>
        <% rows.forEach(r => { %>
          <tr>
            <td><%= r.month %></td>
            <td class="num"><%= r.taxable.toFixed(2) %></td>
            <td class="num"><%= r.output.toFixed(2) %></td>
            <td class="num"><%= r.input.toFixed(2) %></td>
            <td class="num"><strong><%= r.net.toFixed(2) %></strong></td>
          </tr>
        <% }) %>
      </tbody>
      <tfoot>
        <tr>
          <th>Total</th>
          <th class="num"><%= totals.taxable.toFixed(2) %></th>
          <th class="num"><%= totals.output.toFixed(2) %></th>
          <th class="num"><%= totals.input.toFixed(2) %></th>
          <th class="num"><%= totals.net.toFixed(2) %></th>
        </tr>
      </tfoot>
    </table>

    <p class="note">
      * Figures are based solely on sales recorded in this system.<br>
      * Add purchase data to keep input-tax accurate.
    </p>
  </main>

  <!-- any global bundle -->
  <script src="/js/main.js?v=<%= v %>"></script>
</body>
</html>
